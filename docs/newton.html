<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link rel="stylesheet" href="style.css"/>
    <title>Newton's Laws -- Physics for Programmers</title>
</head>
<body>
    <center>
        <table width="640" border="1">
            <tr>
                <td>
                    <center>
                        <h1>
                            Physics for Programmers
                        </h1>
                        <hr/>
                        <h2>
                            Newton's Laws
                        </h2>
                    </center>
                    <hr/>

                    <p>
                        Isaac Newton is a guy who supposedly discovered a bunch of important
                        stuff and wrote a bunch of supposedly important treatises. The measurement
                        unit of &ldquo;ton&rdquo; is named after him.
                    </p>

                    <p>
                        After inventing gravity and founding Apple Computer with his BFF Bill
                        Gates in 1674, Newton decided to explain his work in a couple of simple
                        rules in his 1687 autobiography <i>Philosophi√¶ Naturalis
                        Principia Mathematica</i>.
                    </p>

                    <center>
                        <br/>
                        <i>
                            &ldquo;If thingy goes straight, thingy does it until it gets
                            forced not to.&rdquo;<br/>
                            <img width="400" height="1" src="image/1px.gif"/>&ndash; Newton
                        </i>
                        <br/>
                        <br/>
                    </center>


                    <center>
                        <div id="1stlaw">
                            <b>
                                YOU NEED TO ENABLE JAVASCRIPT, YOU SILLY WUNKUS!
                            </b>
                        </div>
                    </center>


                    <center>
                        <table border="1" width="480">
                            <tr>
                                <td>
                                    <h4>
                                        Note
                                    </h4>
                                    <hr/>
                                    <p>
                                        When Newton wrote this down they hadn't invented equations
                                        yet. This is an artists rendition of the law.
                                    </p>
                                </td>
                            </tr>
                        </table>
                    </center>

                    <p>
                        Usually you depict the dimensions as little arrows on paper. These arrows
                        are the <b>axii</b>. You can find the coordinate of a point by drawing a
                        line perpendicular to an axis from a point to that axis.
                    </p>

                    <center>
                        <img src="image/coords.gif" alt="Coordinate illustration."/><br/>
                        <i>fig 1.2.1. Depiction of coordinates and their axii.</i>
                    </center>

                    <p>
                        A coordinate can represent a point, a vector or basically any other
                        thing that you want. The possibilities are literally endless.
                    </p>

                    <center>
                        <p>
                            <a href="newton.html">&laquo; Prev</a>
                            | <a href="index.html">Back</a>
                            | <a href="newton.html">Next &raquo;</a>
                        </p>
                    </center>

                    <a href="">
                </td>
            </tr>
        </table>
    </center>

<script src="lib.js"></script>

<script>

  let plane_pos = {x: 250, y: 200};

  let wtc1_pos = {x: 360, y: 50};
  let wtc2_pos = {x: 400, y: 100};

  function pointDist(p1, p2) {
    p1p2 = {x: p2.x - p1.x, y: p2.y - p1.y};
    return Math.sqrt(p1p2.x * p1p2.x + p1p2.y * p1p2.y);
  }

  var viz = new InteractiveViz({
      containerId: "1stlaw",
      title: "Newton's First Law",
      canvasWidth: 480,
      canvasHeight: 320,
      
      inputs: [
        { 
          type: 'slider', 
          id: 'speed', 
          label: 'Speed', 
          min: 0, 
          max: 10, 
          initial: 2,
          step: 1,
          onChange: function(value, state) {
            console.log('SLIDER onChange - value:', value, 'state:', state);
          }
        },
        { 
          type: 'slider', 
          id: 'angle', 
          label: 'Angle', 
          min: 0, 
          max: 360, 
          initial: 145,
          step: 1,
          onChange: function(value, state) {
            console.log('SLIDER onChange - value:', value, 'state:', state);
          }
        },

        {
          type: 'button',
          id: 'reset',
          label: 'Reset',
          onClick: function(state) {
            state.icons.plane.setEmoji("‚úàÔ∏è");
            state.icons.plane.setPosition(plane_pos.x, plane_pos.y);

            state.icons.wtc1.setPosition(wtc1_pos.x, wtc1_pos.y);
            state.icons.wtc2.setPosition(wtc2_pos.x, wtc2_pos.y);

            state.crashed = false;
          }
        }
      ],

      icons: [
        { 
          id: 'wtc1', 
          emoji: 'üè¢', 
          x: wtc1_pos.x, y: wtc1_pos.y
        },
        { 
          id: 'wtc2', 
          emoji: 'üè¢', 
          x: wtc2_pos.x, y: wtc2_pos.y
        },
        { 
          id: 'plane', 
          emoji: '‚úàÔ∏è', 
          x: plane_pos.x, y: plane_pos.y
        },
      ],

      onInit: function(state) {
        state.crashed = false;
      },
      
      render: function(ctx, state) {
        ctx.fillStyle = "#f8f8f8";
        ctx.fillRect(0, 0, state.width, state.height);
      },
      
      onSimulationTick: function(state, deltaTime) {
        const step = deltaTime / 16.67;

        const speed_adj = state.inputs.speed / 10.0;
        
        const velocity_x = speed_adj * Math.sin(state.inputs.angle * Math.PI / 180);
        const velocity_y = speed_adj * Math.cos(state.inputs.angle * Math.PI / 180);

        let plane_pos = state.icons.plane.pos;

        if (!state.crashed) {
          plane_pos.x += velocity_x;
          plane_pos.y += velocity_y;
        }

        if (pointDist(plane_pos, state.icons.wtc1) < 20.0) {
          // boom
          state.icons.plane.setEmoji("üí•");
          state.crashed = true;

          console.log("BOOM!");
        }

        if (pointDist(plane_pos, state.icons.wtc2) < 20.0) {
          // boom
          state.icons.plane.setEmoji("üí•");
          state.crashed = true;

          console.log("BOOM!");
        }

        plane_pos.x = Math.max(plane_pos.x, 0);
        plane_pos.y = Math.max(plane_pos.y, 0);
        plane_pos.x = Math.min(plane_pos.x, state.width);
        plane_pos.y = Math.min(plane_pos.y, state.height);

        state.icons.plane.setPosition(plane_pos.x, plane_pos.y);
      }
    });
</script>

</body>
</html>